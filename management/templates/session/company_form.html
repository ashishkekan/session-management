{% extends "session/base.html" %}
{% load static %}

{% block title %}{{ action }} Company{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>{{ action }} Company</h2>
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    {% endif %}
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <label for="{{ form.name.id_for_label }}">Name:</label>
            {{ form.name }}
            {% if form.name.errors %}
                <div class="invalid-feedback d-block">
                    {% for error in form.name.errors %}
                        <span>{{ error }}</span>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.logo.id_for_label }}">Logo:</label>
            {{ form.logo }}
            {% if form.logo.errors %}
                <div class="invalid-feedback d-block">
                    {% for error in form.logo.errors %}
                        <span>{{ error }}</span>
                    {% endfor %}
                </div>
            {% endif %}
            {% if company.logo %}
                <p class="mt-2">Current logo: <img src="{{ company.logo.url }}" alt="{{ company.name }} Logo" style="max-height: 100px; max-width: 200px;"></p>
            {% endif %}
        </div>
        
        <button type="submit" class="btn btn-success">{{ action }}</button>
        <a href="{% url 'company_list' %}" class="btn btn-secondary">Cancel</a>
    </form>
</div>

<style>
    .form-group {
        margin-bottom: 1.5rem;
    }
    .custom-input, .form-control-file {
        width: 100%;
        padding: .375rem .75rem;
        font-size: 1rem;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: .25rem;
        transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    }
    .custom-input:focus {
        border-color: #80bdff;
        outline: 0;
        box-shadow: 0 0 0 .2rem rgba(0,123,255,.25);
    }
    .invalid-feedback.d-block { /* Ensure error messages are displayed */
        display: block !important;
    }
</style>
{% endblock %}
